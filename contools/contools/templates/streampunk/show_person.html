{% extends "streampunk/base.html" %}
{% load streampunk_filters %}
{% block title %}Person:
{% if perms.streampunk.read_private %}
{{ person }}
{% else %}
{{ person.as_badge }}
{% endif %}
{% endblock %}
{% block body_content %}
<table border>
<tr><th>Name</th><td>
{% if perms.streampunk.read_private %}
  {{ person.firstName }}
  {{ person.middleName }}
  {{ person.lastName }}
{% else %}
{{ person.as_badge }}
{% endif %}
</td></tr>
<tr><th>Badge</th><td>{{ person.badge }}</td></tr>
<tr><th>Mem num</th><td>{{ person.memnum }}</td></tr>
<tr><th>Public Notes</th><td>{{ person.pubNotes }}</td></tr>
{% if perms.streampunk.read_private %}
<tr><th>Email</th><td>{{ person.email }}</td></tr>
<tr><th>Dist Email?</th><td>{{ person.distEmail }}</td></tr>
<tr><th>Contact details</th><td>{{ person.contact }}</td></tr>
<tr><th>Private Notes</th><td>{{ person.privNotes }}</td></tr>
<tr><th>Gender</th><td>{{ person.gender }}</td></tr>
<tr><th>Complete?</th><td>{{ person.complete }}</td></tr>
{% endif %}
</table>

{% if perms.streampunk.edit_programme or perms.streampunk.edit_private %}
<p><a href="{% url edit_person pk=person.id %}">Edit person</a>.</p>
{% endif %}

<h2>Items</h2>
<table border="1">
{% for itemperson in person_items %}
<tr>
  <td>{{ itemperson.item|linky|safe }}</td>
  <td>{{ itemperson.role }}</td>
  <td>{{ itemperson.status }}</td>
{% if perms.progdg2.edit_programme %}
  <td><a href="{% url delete_itemperson pk=itemperson.id %}">Remove</a></td>
{% endif %}
</tr>
{% empty %}
<tr><td>Not on any items</td></tr>
{% endfor %}
</table>

{% if perms.progdg2.edit_programme %}
<p><a href="{% url new_itemperson %}?person={{ person.id }}">Add {{ person }} to an item</a>.</p>
{% if person.email %}
<p><a href="{% url mail_person pk=person.id %}">Email {{ person }}</a>.</p>
{% else %}
<p>(No email address for {{person}}.)</p>
{% endif %}
{% endif %}

<h2>Tags</h2>
<table border="1">
{% for tag in person_tags %}
<tr><td>{{ tag|linky|safe }}</td></tr>
{% empty %}
<tr><td>No tags yet</td></tr>
{% endfor %}
</table>
{% if perms.streampunk.edit_tags %}
<p><a href="{% url edit_tags_for_person person.id %}">Edit tags for {{ person }}</a>.</p>
{% endif %}
{% include "streampunk/list_avail.html" %}
{% endblock %}

