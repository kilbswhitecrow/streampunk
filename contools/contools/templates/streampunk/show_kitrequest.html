{% extends "streampunk/base.html" %}
{% comment %}
This file is part of Streampunk, a Django application for convention programmes
Copyright (C) 2012 Stephen Kilbane
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load streampunk_filters %}
{% block title %} Kit Request: {{ kitrequest }}{% endblock %}
{% block body_content %}
<table border>
<tr><th>Kind</th><td>{{ kitrequest.kind }}</td></tr>
<tr><th>Count</th><td>{{ kitrequest.count }}</td></tr>
<tr><th>Status</th><td>{{ kitrequest.status }}</td></tr>
<tr><th>Setup Assistance?</th><td>{{ kitrequest.setupAssistance }}</td></tr>
<tr><th>Notes</th><td>{{ kitrequest.notes }}</td></tr>
</table>

{% if kitrequest.okay_to_edit %}
<p><a href="{% url edit_kitrequest pk=kitrequest.id %}">Edit this request</a>.</p>
{% else %}
<p>This request is in use by {{ kitrequest.item_set.count }} items -
cannot edit it.</p>
{% endif %}
<h2>Items making this request</h2>
<p>
<table border>
    <tr>
      <th>Item</th>
      <th>Room</th>
      <th>Day</th>
      <th>Start</th>
      <th>Satisfied by?</th>
    </tr>
    {% for item in kitrequest.item_set.all %}
      <tr>
          <td>{{ item|linky|safe }}</td>
          <td>{{ item.room|linky|safe}}</td>
          <td>{{ item.day }}</td>
          <td>{{ item.start }}</td>
          <td>{{ kitrequest.is_satisfied_by_first }}</td>
     </tr>
    {% empty %}
      <tr><td colspan="5">Not assigned to any items</td></tr>
    {% endfor %}
</table>
</p>

{% endblock %}
