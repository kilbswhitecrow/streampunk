{% extends "streampunk/base.html" %}
{% comment %}
This file is part of Streampunk, a Django application for convention programmes
Copyright (C) 2012-2013 Stephen Kilbane
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load streampunk_filters %}
{% block title %}{{ verbose_name_plural }} {% endblock %}
{% block body_content %}
<table border>
<tr>
  <th>Bundle</th>
  <th>Status</th>
  <th>Things</th>
  <th>Rooms</th>
  <th>Items</th>
  <th>Delete?</th>
</tr>
{% for kb in kitbundles %}
<tr>
  <th><a href="{% url show_kitbundle_detail pk=kb.id %}">{{ kb.name }}</a></th>
  <td>{{ kb.status }}</td>
  <td>
  {% for thing in kb.things.all %}
    {{ thing|linky|safe}} <br/>
  {% endfor %}
  </td>
  <td>
  {% for room in kb.rooms %}
    {% ifchanged room.room %}
      {{ room.room|linky|safe}} <br/>
    {% endifchanged %}
  {% endfor %}
  </td>
  <td>
  {% for item in kb.items %}
    {% ifchanged item.item %}
      {{ item.item|linky|safe}} <br/>
    {% endifchanged %}
  {% endfor %}
  </td>
  {% if perms.streampunk.edit_kit and not kb.in_use %}
  <td><a href="{% url delete_kitbundle pk=kb.id %}">Delete</a></td>
  {% else %}
  <td>In use</td>
  {% endif %}
</tr>
{% empty %}
<tr><td colspan="6">No KitBundles yet</td></tr>
{% endfor %}
</table>
{% if perms.streampunk.edit_kit %}
<p><a href="{{ new_url }}">Add new {{ verbose_name }}</a>.</p>
{% endif %}
<hr/>
<p>This is kitbundle_list.html</p>
{% endblock %}
