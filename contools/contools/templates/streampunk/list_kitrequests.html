{% comment %}
This file is part of Streampunk, a Django application for convention programmes
Copyright (C) 2012-2013 Stephen Kilbane
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% if perms.streampunk.read_private %}
{% load streampunk_filters %}
{% load render_table from django_tables2 %}
{% if not item %}
  {% block styles %}
    <link rel="stylesheet" href="{{ STATIC_URL }}django_tables2/themes/paleblue/css/screen.css" />
  {% endblock %}
{% endif %}
<h2>Kit Requests</h2>
{% render_table krtable %}
{% comment %}
<table border>
{% if item %}
    <tr>
      <th>Request</th>
      <th>Satisfied by?</th>
      <th>Delete?</th>
    </tr>
  {% for req in kitrequests %}
    <tr>
    <td>{{ req|linky|safe }}</td>
    <td>{{ req.is_satisfied_by_first }}</td>
    <td><a href="{% url delete_kitrequest pk=req.id %}">Delete</a></td>
    </tr>
  {% empty %}
    <tr><td colspan="3">No kit requests yet</td></tr>
  {% endfor %}
{% else %}
  <tr>
    <th>Request</th>
    <th>Item</th>
    <th>Room</th>
    <th>Day</th>
    <th>Start</th>
    <th>Satisfied by?</th>
  </tr>
  {% for req in kitrequests %}
    {% for item in req.item_set.all %}
      <tr><td>{{ req|linky|safe }}</td>
          <td>{{ item|linky|safe }}</td>
          <td>{{ item.room|linky|safe}}</td>
          <td>{{ item.day }}</td>
          <td>{{ item.start }}</td>
          <td>{{ req.is_satisfied_by_first }}</td>
     </tr>
    {% empty %}
      <tr><td colspan="6">{{ req|linky|safe }}</td><td colspan="4">Not assigned to any items</td></tr>
    {% endfor %}
  {% empty %}
    <tr><td>No kit requests yet</td></tr>
  {% endfor %}
{% endif %}
</table>
{% endcomment %}
{% endif %}
