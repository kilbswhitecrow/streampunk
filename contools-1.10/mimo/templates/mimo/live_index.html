{% extends "mimo/base.html" %}
{% comment %}
This file is part of Streampunk, a Django application for convention programmes
Copyright (C) 2012-2017 Stephen Kilbane
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% block title %}Live Index{% endblock %}
{% block body_content %}
{% if items %}
  <table border="1">
  <tr>
  <th>Code</th>
  <th>Kind</th>
  <th>Subkind</th>
  <th>Count</th>
  <th>State</th>
  <th>Room</th>
  <th>Container</th>
  <th>Operations</th>
  </tr>
  {% for i in items %}
  <tr>
  <td>{{ i.item.code }}</td>
  <td>{{ i.item.kind }}</td>
  <td>{{ i.item.subkind }}</td>
  <td>{{ i.item.count }}</td>
  <td>{{ i.item.state }}</td>
  <td>{{ i.item.room }}</td>
  <td>{{ i.item.container }}</td>
  <td>
  <a href="{% url "live_edit" i.pk %}">Edit</a><br/>
  {% if i.item.state == 'Spare' or i.item.state == 'Scratched' %}
  Deploy<br/>
  {% else %}
  Spare<br/>
  Scratch<br/>
  {% endif %}
  {% if i.item.count > 1 %}
  Split<br>
  {% endif %}
  Move
  </td>
  </tr>
  {% endfor %}
  </table>
{% else %}
  <p>
  <form action="{% url "live_setup" %}" method="POST">
  {% csrf_token %}
  <input type="submit" value="Setup" />
  </form>
  </p>
{% endif %}
{% endblock %}
